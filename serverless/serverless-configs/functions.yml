verifyToken:
  handler: 'src/handlers/auth-handler.verifyToken'
  description: 'Verifies JWT'

register:
  handler: 'src/handlers/auth-handler.register'
  description: 'Creates New User'
  timeout: 20
  events:
    - http:
        method: 'post'
        path: 'auth/register'
        cors: true
        resultTtlInSeconds: 20

login:
  handler: 'src/handlers/auth-handler.login'
  description: 'Authorizes User'
  timeout: 10
  events:
    - http:
        method: 'post'
        path: 'auth/login'
        cors: true
        resultTtlInSeconds: 10

logout:
  handler: 'src/handlers/auth-handler.logout'
  description: 'Authorizes User'
  timeout: 10
  events:
    - http:
        method: 'get'
        path: 'auth/logout'
        cors: true
        resultTtlInSeconds: 10

acceptedTermsAndConditions:
  handler: 'src/handlers/user-handler.acceptedTermsAndConditions'
  description: 'Accepts Terms And Conditions'
  events:
    - http:
        method: 'post'
        path: 'user/acceptedTermsAndConditions'
        cors: true
        authorizer:
          name: verifyToken
          type: request
          resultTtlInSeconds: 10
          indentitySource: method.request.header.Cookie

getAccount:
  handler: 'src/handlers/user-handler.getAccount'
  description: "Gets User's Account"
  events:
    - http:
        method: 'get'
        path: 'user/account'
        cors: true
        authorizer:
          name: verifyToken
          type: request
          resultTtlInSeconds: 10
          indentitySource: method.request.header.Cookie
